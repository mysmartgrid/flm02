<%+header%>

<style type="text/css">
	[disabled] {
		color: #bbb;
	}

	[disabled]:hover {
		color: #bbb;
		background-color: #ddd;
	}

	.progress {
		display: block;
		height: 1.5em;
		float: left;
		margin: 0.5em 0pt;
		width: 10.5em;
		background-image: url("/luci-static/resources/progressbar.png");
		background-size: auto 100%;
		background-repeat: no-repeat;
		padding: 0.5em 0pt 0.5em 2.5em;
	}
</style>

<script type="text/javascript" src="/luci-static/resources/wizard.js" />
<script id="validations" type="text/javascript" src="/luci-static/resources/validator.js" />

<form id="wizard_form" method="get" action="javascript: submit()" onreset="wizard_reset()">
	<div id="progress">
		<div id="prog-network" class="progress" style="background-image: url('/luci-static/resources/progressbar_cur.png');" lang="en">
			Network
		</div>
		<div id="prog-sensor" class="progress" lang="en">
			Sensors
		</div>
		<div id="prog-reg" class="progress" lang="en">
			Registration
		</div>
		<div style="clear: both;" />
	</div>

	<div>
		<noscript>
			<div class="errorbox">
				<strong>Java Script required!</strong>
				<br/>
				You must enable Java Script in your Browser for this wizard to work properly!
			</div>
		</noscript>
	</div>

	<div class="cbi-map" id="msg_wizard">
		<h2><a id="content" name="content" lang="en">Interface</a></h2>
		<div class="cbi-map-descr" lang="en">Please select the interface connected to the internet.</div>
		<fieldset class="cbi-section">
			<div class="cbi-section-descr"></div>
			<fieldset class="cbi-section-node">
				<div class="cbi-value" id="msg_wizard-iface-load-div">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-iface-load" />
					<span lang="en">
					Loading current interface selection.
					</span>
				</div>
			</fieldset>
		</fieldset>
		<fieldset class="cbi-section">
			<div class="cbi-section-descr"></div>
			<fieldset class="cbi-section-node" id="msg_wizard-0x4e1e60">
				<div class="cbi-value" id="msg_wizard-1-interface">
					<label class="cbi-value-title" for="msg_wizard_interface" lang="en">Interface</label>
					<div class="cbi-value-field">
						<select class="cbi-input-select" id="msg_wizard_interface" name="msg_wizard_interface" size="1">
							<option id="msg_wizard-1-interface-wlan" value="wlan" selected="selected" lang="en">WIFI</option>
							<option id="msg_wizard-1-interface-lan" value="lan" lang="en">LAN</option>
						</select>
					</div>
				</div>
			</fieldset>
		</fieldset>
	</div>

	<div class="cbi-map" id="msg_wifi" style="display: none;">
		<h2><a id="content" name="content" lang="en">Wifi</a></h2>
		<div class="cbi-map-descr" lang="en">Please enter the name, encryption type and key/passphrase of your wifi network.</div>
		<fieldset class="cbi-section">
			<div class="cbi-section-descr"></div>
			<fieldset class="cbi-section-node">
				<div class="cbi-value" id="msg_wizard-wifi-iface-set-div">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-wifi-iface-set" />
					<span lang="en">Setting up interfaces.</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-wifi-config" />
					<span lang="en">Loading current wireless configuration.</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-wifi-list" />
					<span lang="en">Loading list of available wireless networks.</span>
				</div>
			</fieldset>
		</fieldset>
		<fieldset class="cbi-section" id="cbi-wireless-wifi-iface">
			<div class="cbi-section-descr"></div>
			<fieldset class="cbi-section-node" id="cbi-wireless-cfg03bd0e">
				<div class="cbi-value" id="wifi-ssid">
					<label class="cbi-value-title" for="cbid.wireless.cfg03bd0e.ssid" lang="en">
						<span lang="en">Network Name</span> (<abbr title="Extended Service Set Identifier">ESSID</abbr>)
					</label>
					<div class="cbi-value-field">
						<div>
							<select onchange="change_wifi()" id="essid" class="cbi-input-select">
								<option value="" lang="en">-- custom --</option>
							</select>
						</div>
						<div style="margin-top: 0.3em;" id="essid-input-div" >
							<input type="text" class="cbi-input-text" name="essid-input" id="essid-input" value="" />
						</div>
					</div>
				</div>
				<div class="cbi-value" id="wifi-autoenc">
					<label class="cbi-value-title" for="autoenc" lang="en">
						Auto-Encryption
					</label>
					<div class="cbi-value-field">
						<input type="checkbox" onchange="change_wifi()" class="cbi-input-checkbox" id="autoenc" name="autoenc" value="1" checked="checked" />
						<div class="cbi-value-description" lang="en">
							Automatically set encryption
						</div>
					</div>
				</div>
				<div class="cbi-value" id="wifi-enc" style="display: none;" >
					<label class="cbi-value-title" for="wifi-enc-select" lang="en">
						Encryption
					</label>
					<div class="cbi-value-field">
						<select onchange="change-wifi()" class="cbi-input-select" id="wifi-enc-select" name="wifi-enc-select" size="1">
							<option id="cbi-wireless-cfg03bd0e-encryption-none" value="none" lang="en">No Encryption</option>
							<option id="cbi-wireless-cfg03bd0e-encryption-wep" value="wep" selected="selected" lang="en">WEP</option>
							<option id="cbi-wireless-cfg03bd0e-encryption-psk" value="psk" lang="en">WPA-PSK</option>
							<option id="cbi-wireless-cfg03bd0e-encryption-psk2" value="psk2" lang="en">WPA2-PSK</option>
						</select>
					</div>
				</div>
				<div class="cbi-value" id="wifi-key">
					<label class="cbi-value-title" for="cbid.wireless.cfg03bd0e.key" lang="en">
						WEP-key or WPA-passphrase
					</label>
					<div class="cbi-value-field">
						<input type="text" class="cbi-input-text" name="wifi-key-input" id="wifi-key-input" value="" />
					</div>
				</div>
			</fieldset>
			<br />
		</fieldset>
		<br />
	</div>

	<div class="cbi-map" id="network" style="display: none;">
		<h2>
			<a id="content" name="content" lang="en">Network</a>
		</h2>
		<div class="cbi-map-descr" lang="en">
			These default settings should work just fine for most networks.
		</div>
		<fieldset class="cbi-section">
			<div class="cbi-section-descr"></div>
			<fieldset class="cbi-section-node">
				<div class="cbi-value" id="msg_wizard-net-iface-set-div">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-net-iface-set" />
					<span lang="en">Setting up interfaces.</span>
				</div>
				<div class="cbi-value" id="msg_wizard-wifi-save-div">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-wifi-save" />
					<span lang="en">Saving wireless configuration.</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-net-config" />
					<span lang="en">Loading current network configuration.</span>
				</div>
			</fieldset>
		</fieldset>
		<fieldset class="cbi-section">
			<!--<legend>Local Network</legend>-->
			<div class="cbi-section-node" id="network-wan">
				<div class="cbi-value" id="network-wan-proto">
					<label class="cbi-value-title" for="dhcp" lang="en">
						DHCP
					</label>
					<div class="cbi-value-field">
						<input type="checkbox" class="cbi-input-checkbox" id="dhcp" name="dhcp" onchange="toggle_dhcp();" checked="checked" value="1" />
						<div class="cbi-value-description" lang="en">
							Automatically set network settings
						</div>
					</div>
				</div>
			</div>
			<div class="cbi-value" id="network-wan-ipaddr" style="display: none;">
				<label class="cbi-value-title" for="network-ipaddr">
					<abbr title="Internet Protocol Version 4" lang="en">IPv4</abbr>-<span lang="en">Address</span>
				</label>
				<div class="cbi-value-field">
					<input type="text" class="cbi-input-text" name="network-ipaddr" id="network-ipaddr" value="" />
				</div>
			</div>

			<div class="cbi-value" id="network-wan-netmask" style="display: none;">
				<label class="cbi-value-title" for="network-netmask">
					<abbr title="Internet Protocol Version 4" lang="en">IPv4</abbr>-<span lang="en">Netmask</span>
				</label>
				<div class="cbi-value-field">
					<input type="text" class="cbi-input-text" name="network-netmask" id="network-netmask" value="" />
				</div>
			</div>

			<div class="cbi-value" id="network-wan-gateway" style="display: none;">
				<label class="cbi-value-title" for="network-gateway">
					<abbr title="Internet Protocol Version 4" lang="en">IPv4</abbr>-<span lang="en">Gateway</span>
				</label>
				<div class="cbi-value-field">
					<input type="text" class="cbi-input-text" name="network-gateway" id="network-gateway" value="" />
				</div>
			</div>

			<div class="cbi-value" id="network-wan-dns" style="display: none;">
				<label class="cbi-value-title" for="network-dns">
					<abbr title="Domain Name System" lang="en">DNS</abbr>-<span lang="en">Server</span>
				</label>
				<div class="cbi-value-field">
					<input type="text" class="cbi-input-text" name="network-dns" id="network-dns" value="" />
				</div>
			</div>
			<br />
		</fieldset>
	</div>

	<div class="cbi-map" id="msg_wizard-sensor" style="display: none;">
		<h2><a id="content" name="content" lang="en">Sensors</a></h2>
		<div class="cbi-map-descr" lang="en">Please configure the sensors you want to use.</div>
		<fieldset class="cbi-section">
			<fieldset class="cbi-section-node">
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-net-save" />
					<span lang="en">Saving network configuration.</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-net-apply" />
					<span lang="en">Applying network configuration. (Please be patient)</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-sensor-load" />
					<span lang="en">Loading current sensor configuration.</span>
				</div>
			</fieldset>
		</fieldset>
		<fieldset class="cbi-section">
			<fieldset class="cbi-section">
				<div class="cbi-section-node" id="sensors">
					<div class="cbi-value" id="sensor-phases">
						<label class="cbi-value-title">
							<span lang="en">Number of phases</span>
						</label>
						<div class="cbi-value-field">
							<select id="flukso-sensor-phases" onchange="toggle_phase_setting(this);">
								<option value="1">1</option>
								<option value="3">3</option>
							</select>
							<br />
							<div class="cbi-value-description">
								<span class="cbi-value-helpicon"><img src="/luci-static/resources/cbi/help.gif" alt="" /></span>
								<span lang="en">When selecting 3 phases, the three current clamp ports will be grouped and presented as a single sensor #1. Sensors #2 and #3 will be disabled automatically after saving. When selecting 1 phase, each clamp port will be sampled seperately and mapped to sensors #1, #2 and #3 respectively.</span>
							</div>
						</div>
					</div>
				</div>
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-1">
				<legend lang="en">Sensor #1</legend>
				<div class="cbi-section-node" id="cbi-flukso-1">
					<div class="cbi-value" id="cbi-flukso-1-enable">
						<label class="cbi-value-title" for="flukso-1-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-1-enable" name="flukso-1-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-1-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-1-class" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-type" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-type" lang="en">Type</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-1-type" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-function" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-function" lang="en">Function/Name</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-1-function" id="flukso-1-function" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-voltage" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-voltage" lang="en">Voltage</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-1-voltage" id="flukso-1-voltage" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-1-current" style="display: none;">
						<label class="cbi-value-title" for="flukso-1-current" lang="en">Current</label>
						<div class="cbi-value-field">
							<select class="cbi-input-select" id="flukso-1-current" name="flukso-1-current" size="1">
								<option id="cbi-flukso-1-current-50" value="50" selected="selected">50</option>
								<option id="cbi-flukso-1-current-100" value="100">100</option>
								<option id="cbi-flukso-1-current-250" value="250">250</option>
								<option id="cbi-flukso-1-current-500" value="500">500</option>
							</select>
						</div>
					</div>
				</div>
				<br />
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-2">
				<legend lang="en">Sensor #2</legend>
				<div class="cbi-section-node" id="cbi-flukso-2">
					<div class="cbi-value" id="cbi-flukso-2-enable">
						<label class="cbi-value-title" for="flukso-2-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-2-enable" name="flukso-2-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-2-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-2-class" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-type" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-type" lang="en">Type</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-2-type" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-function" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-function" lang="en">Function/Name</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-2-function" id="flukso-2-function" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-voltage" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-voltage" lang="en">Voltage</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-2-voltage" id="flukso-2-voltage" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-2-current" style="display: none;">
						<label class="cbi-value-title" for="flukso-2-current" lang="en">Current</label>
						<div class="cbi-value-field">
							<select class="cbi-input-select" id="flukso-2-current" name="flukso-2-current" size="1">
								<option id="cbi-flukso-2-current-50" value="50" selected="selected">50</option>
								<option id="cbi-flukso-2-current-100" value="100">100</option>
								<option id="cbi-flukso-2-current-250" value="250">250</option>
								<option id="cbi-flukso-2-current-500" value="500">500</option>
							</select>
						</div>
					</div>
				</div>
				<br />
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-3">
				<legend lang="en">Sensor #3</legend>
				<div class="cbi-section-node" id="cbi-flukso-3">
					<div class="cbi-value" id="cbi-flukso-3-enable">
						<label class="cbi-value-title" for="flukso-3-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-3-enable" name="flukso-3-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-3-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-3-class" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-type" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-type" lang="en">Type</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-3-type" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-function" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-function" lang="en">Function/Name</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-3-function" id="flukso-3-function" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-voltage" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-voltage" lang="en">Voltage</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-3-voltage" id="flukso-3-voltage" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-3-current" style="display: none;">
						<label class="cbi-value-title" for="flukso-3-current" lang="en">Current</label>
						<div class="cbi-value-field">
							<select class="cbi-input-select" id="flukso-3-current" name="flukso-3-current" size="1">
								<option id="cbi-flukso-3-current-50" value="50" selected="selected">50</option>
								<option id="cbi-flukso-3-current-100" value="100">100</option>
								<option id="cbi-flukso-3-current-250" value="250">250</option>
								<option id="cbi-flukso-3-current-500" value="500">500</option>
							</select>
						</div>
					</div>
				</div>
				<br />
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-4">
				<legend lang="en">Sensor #4</legend>
				<div class="cbi-section-node" id="cbi-flukso-4">
					<div class="cbi-value" id="cbi-flukso-4-enable">
						<label class="cbi-value-title" for="flukso-4-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-4-enable" name="flukso-4-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-4-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-4-class" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-type" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-type" lang="en">Type</label>
						<div class="cbi-value-field">
							<!--<input type="text" class="cbi-input-text" name="flukso-4-type" id="flukso-4-type" value="" />-->
							<select class="cbi-input-select" onchange="toggle_sensor_type(this);" name="flukso-4-type" id="flukso-4-type">
								<option value="electricity" selected="selected" lang="en">electricity</option>
								<option value="water" lang="en">water</option>
								<option value="gas" lang="en">gas</option>
							</select>
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-function" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-function" lang="en">Function/Name</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-4-function" id="flukso-4-function" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-imppkwh" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-imppkwh" lang="en">pulses/kWh</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-4-imppkwh" id="flukso-4-imppkwh" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-4-lpimp" style="display: none;">
						<label class="cbi-value-title" for="flukso-4-lpimp" lang="en">L/pulse</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-4-lpimp" id="flukso-4-lpimp" value="" />
						</div>
					</div>
				</div>
				<br />
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-5">
				<legend lang="en">Sensor #5</legend>
				<div class="cbi-section-node" id="cbi-flukso-5">
					<div class="cbi-value" id="cbi-flukso-5-enable">
						<label class="cbi-value-title" for="flukso-5-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-5-enable" name="flukso-5-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-5-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-5-class" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-type" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-type" lang="en">Type</label>
						<div class="cbi-value-field">
							<!--<input type="text" class="cbi-input-text" name="flukso-5-type" id="flukso-5-type" value="" />-->
							<select class="cbi-input-select" onchange="toggle_sensor_type(this);" name="flukso-5-type" id="flukso-5-type">
								<option value="electricity" selected="selected" lang="en">electricity</option>
								<option value="water" lang="en">water</option>
								<option value="gas" lang="en">gas</option>
							</select>
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-function" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-function" lang="en">Function/Name</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-5-function" id="flukso-5-function" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-imppkwh" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-imppkwh" lang="en">pulses/kWh</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-5-imppkwh" id="flukso-5-imppkwh" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-5-lpimp" style="display: none;">
						<label class="cbi-value-title" for="flukso-5-lpimp" lang="en">L/pulse</label>
						<div class="cbi-value-field">
							<input type="text" class="cbi-input-text" name="flukso-5-lpimp" id="flukso-5-lpimp" value="" />
						</div>
					</div>
				</div>
				<br />
			</fieldset>

			<fieldset class="cbi-section sensor-config" id="cbi-flukso-6">
				<legend lang="en">Sensor #6</legend>
				<div class="cbi-section-node" id="cbi-flukso-6">
					<div class="cbi-value" id="cbi-flukso-6-enable">
						<label class="cbi-value-title" for="flukso-6-enable" lang="en">Enable</label>
						<div class="cbi-value-field">
							<input class="cbi-input-checkbox" type="checkbox" id="flukso-6-enable" name="flukso-6-enable" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-6-id" style="display: none;">
						<label class="cbi-value-title" for="flukso-6-id" lang="en">Identification</label>
						<div class="cbi-value-field">
							<div class="sensor-value"></div>
							<input type="hidden" id="flukso-6-id" value="" />
						</div>
					</div>
					<div class="cbi-value" id="cbi-flukso-6-class" style="display: none;">
						<label class="cbi-value-title" for="flukso-6-class" lang="en">Class</label>
						<div class="cbi-value-field">
							<div class="sensor-value" lang="en"></div>
							<input type="hidden" id="flukso-6-class" value="" />
						</div>
					</div>
				</div>
				<br />
			</fieldset>
		</fieldset>
	</div>

	<div class="cbi-map" id="msg_wizard-registration" style="display: none;">
		<h2><a id="content" name="content" lang="en">Registration</a></h2>
		<div class="cbi-map-descr" lang="de">Bitte führen Sie die folgenden Schritte durch um ihren Flukso zu aktivieren.</div>
		<fieldset class="cbi-section">
			<fieldset class="cbi-section-node">
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-sensor-save" />
					<span lang="en">Saving sensor configuration.</span>
				</div>
				<div class="cbi-value">
					<img src="/luci-static/resources/loading.gif" id="msg_wizard-sensor-apply" />
					<span lang="en">Applying sensor configuration.</span>
				</div>
			</fieldset>
			<fieldset class="cbi-section">
					<div style="padding: 0.5em 1em; background-color: white; border-width: 1px; border-style: dotted; border-color: #555;">
						<ol style="margin: 0.5em 1em 0.5em 1.5em">
							<li style="margin-bottom: 0.5em">
								Besuchen Sie mit Ihrem Webbrowser die Webseite <a href="http://www.mysmartgrid.de">http://www.mysmartgrid.de</a>. Falls Sie bereits ein Benutzerkonto angelegt haben springen Sie zu Schritt 3.
							</li>
							<li style="margin-bottom: 0.5em">
								Bitte legen Sie sich ein Benutzerkonto an. Dazu klicken Sie bitte auf "Registrieren". Sie finden diesen Link auf der linken Seite unten, um Kasten "Benutzeranmeldung". Auf der folgenden Seite geben Sie einen Benutzernamen und eine gültige eMail-Adresse ein. Das System schickt Ihnen daraufhin eine eMail. Darin finden Sie einen Link, mit dem das Anlegen eines Benutzerkontos abgeschlossen wird. Folgen Sie dazu einfach den Hinweisen.
							</li>
							<li style="margin-bottom: 0.5em">
								Bitte loggen Sie sich auf der Webseite ein. Dazu geben Sie ihren Benutzernamen und ihr Passwort im Kasten "Benutzeranmeldung" ein. Das System zeigt Ihnen nun ihr Dashboard an - hier können Sie in Zukunft Ihren Stromverbrauch beobachten. Im Moment ist der Graph allerdings noch leer, da Ihr Flukso noch nicht mit dem System verknüpft ist.
							</li>
							<li style="margin-bottom: 0.5em">
								Um den Flukso zu verknüpfen klicken Sie bitte auf "Mein Konto" auf der linken Seite, danach auf "Geräte". Hier können Sie nun Ihren persönlichen Aktivierungscode eingeben. Für Ihr Gerät geben sie nun bitte folgenden Aktivierungscode ein:
								<div style="margin: 0.5em 1em; font-weight: bold">
									<%
										local uci = require "luci.model.uci".cursor()

										local DEVICE = '0123456789abcdef0123456789abcdef'
										uci:foreach('system', 'system', function(x) if x.device ~= nil then DEVICE = x.device end end)

										print(string.sub(DEVICE, 1, 10))
									%>
								</div>
								Klicken Sie anschließend auf "Gerät hinzufügen", um das Gerät anzumelden
							 </li>
							 <li style="margin-bottom: 0.5em">
								Fertig! Wenn die Installation des Geräts korrekt funktioniert, sollten Sie nach max. 15 Minuten erste Werte auf Ihrem Dashboard sehen. In der Spalte "Last heartbeat" ("Mein Konto" -> "Geräte") sehen Sie zudem, wann sich das Gerät das letzte Mal gemeldet hat.
							 </li>
							 <li style="margin-bottom: 0.5em">
								Falls Sie Hilfe benötigen kontaktieren Sie uns bitte via eMail. Die Adresse hierfür ist:
								<div>
									<a href="mailto:msg-support@itwm.fraunhofer.de">msg-support@itwm.fraunhofer.de</a>
								</div>
								Telefonisch können wir die Anfragen leider nicht bewältigen.
							 </li>
						</ol>
					</div>
					Sie können nun ihren Stromverbrauch direkt beobachten. Wenn Sie weitere Vorschläge oder Anregungen haben, benutzen Sie bitte das Forum auf <a href="http://www.mysmartgrid.de">www.mysmartgrid.de</a>. Dort können Sie sich auch mit anderen Projektteilnehmern austauschen.
			</fieldset>
		</fieldset>
	</div>

	<div id="wizard-form-buttons">
		<input type="submit" class="cbi-button-save" value="Next" lang="en" />
		<input type="reset" class="cbi-button-reset" value="Back" lang="en" style="display: none;" />
	</div>
</form>

<div id="login_form_div" style="display: none; border: 1px solid #888; padding: 10px; z-index: 9999; background: #fff;" >
	<form id="login_form" action="javascript: login_callback([], $('#username').val(), $('#password').val());" onreset="wizard_reset(); " >
		<fieldset class="cbi-section">
			<fieldset class="cbi-section-node">
				<div class="cbi-value">
					<input type="text" id="username" value="root" />
				</div>
				<div class="cbi-value">
					<input type="password" id="password" />
				</div>
			</fieldset>
		</fieldset>

		<div id="login-form-buttons">
			<input type="submit" class="cbi-button-save" value="Login" lang="en" />
			<input type="reset" class="cbi-button-reset close" value="Cancel" lang="en" />
		</div>
	</form>
</div>

<%+footer%>
